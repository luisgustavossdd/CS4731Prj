package dk.itu.mario.level;

import java.util.ArrayList;

public class LevelGenerator {
	public static final int	MAX_WEIGHT = 100;
	
	public EvaluationFunction		evalFn;
	public OptimizationProblem		optimizationProblem;
	public OptimizationAlgorithm	optimizationAlgorithm;
	
	LevelGenerator(){
		int[]		copies 	= new int[10];
		double[]	profits	= new double[10],
					weights = new double[10];
		
		int		population		= 200;
		double	replacementRate	= 0.60, 
				mutationRate	= 0.20;
		
		evalFn 					= new KnapsackEvaluationFunction(copies,profits,weights,MAX_WEIGHT);
		optimizationProblem		= new GeneticAlgorithmProblem(evalFn,LevelMutations.getMutationFunctions(),LevelCrossovers.getCrossoversFunction());
		optimizationAlgorithm	= new GeneticAlgorithm(population, replacementRate, mutationRate, optimizationProblem);
	}
	
	public ArrayList<Building> create(int style, int difficulty) {
		ArrayList<Building> result = new ArrayList<Building>();
		Trainer.train(optimizationAlgorithm);
		result = optimizationAlgorithm.getOptimal();
		return result;
	}
}
